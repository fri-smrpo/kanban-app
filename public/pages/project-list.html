<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title></title>

  <script src="../js/jquery/jquery-3.3.1.min.js"></script>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

  <link rel="stylesheet" href="../css/style.css">

  <!-- Fonts -->
  <link href="../css/all.min.css" rel="stylesheet" type="text/css">
  <link
    href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i"
    rel="stylesheet">


  <!-- JS -->
  <script src="../js/lib/auth.js"></script>
  <script src="../js/lib/api.js"></script>
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


  <!-- Style -->
  <link href="../css/base.css" rel="stylesheet">

</head>

<body>

<h1>Seznam projektov</h1>
<ul id="list"></ul>

<script>

function dodajVloga(a) {
  $("#vloga").text(a);
}

function dodajOseba() {
  $("#ppl").append($('<tr><td>Ime priimek, vloga</tr></td>'));
}

  function add() { //kličem ko je projekt ustvarjen
    apiProjectCreate({
      name: 'aa', //poberem vn ime projetka
      users: []   //poberem vn userje
    }, function(response)  {  //Kličem, če server vrne uspešno
      console.log(response);
    }, function (error) {     //Kličem, če server vrne neuspešno
      console.error(error);
    })
  }

  function load() {
    $("#items").empty();

    apiProjectList(items => {
      items.forEach(x => {
        const element = $('<tr><td> ${ x.name } </td></tr>');
        $("#items").append(element);
      })
    });
  }

  load();


</script>


<div class="container">

  <div id="items-view">
    <!-- Button trigger modal -->
    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal" style="margin: 15px;">
      Dodaj projekt
    </button>

    <table class="table table-striped">
      <thead>
      <tr>
        <th>Ime projetka</th>
      </tr>
      </thead>
      <tbody id="items">

      </tbody>
    </table>

  </div>
</div>

<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Nov projekt</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="input-group">
          <span class="input-group-addon"></span>
          <input id="msg" type="text" class="form-control" name="msg" placeholder="Naslov">
        </div>


        <table class="table table-striped" style="margin-top:30px;">
          <tbody id="ppl">

          </tbody>
        </table>


        <!-- USER-Drop down -->
        <div class="input-group" style="margin-top:40px;">
          <select class="custom-select" id="inputGroupSelect04">
            <option selected>Izberi ime</option>
            <option value="1">Ime 1</option>   <!--  Tako dinamično dodaj imena-->
          </select>


          <div class="input-group-append">
            <button class="btn btn-outline-secondary dropdown-toggle" id="vloga" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Izberi vlogo</button>
            <div class="dropdown-menu">
              <a class="dropdown-item" href="#" onclick="dodajVloga('Produktni vodja')">Produktni vodja</a>
              <div role="separator" class="dropdown-divider"></div>
              <a class="dropdown-item" href="#" onclick="dodajVloga('Skrbnik metodologije')">Skrbnik metodologije</a>
              <div role="separator" class="dropdown-divider"></div>
              <a class="dropdown-item" href="#" onclick="dodajVloga('Član razvojne skupine')">Član razvojne skupine</a>


            </div>
            <button class="btn btn-outline-secondary" type="button" onclick="dodajOseba()">+</button>
          </div>
        </div>


      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary">Potrdi</button>
      </div>
    </div>
  </div>
</div>

</body>

</html>
